.row.ScoresheetTab
    form(novalidate name='Scoresheet.scoresheetForm' ng-submit='Scoresheet.submitScoresheet()' ng-class="{'readonly-form' : Scoresheet.game.submitted}")
        .col-lg-6.col-md-6.col-sm-12
            div(ng-controller='ScoresheetCycleController as CycleCtrl')
                .row.tossup-cycle-container(ng-show='CycleCtrl.game.onTossup')
                    .col-lg-12.col-sm-12.col-md-12.col-xs-12(ng-if='Scoresheet.game.teams[0].teamInfo.id && Scoresheet.game.teams[1].teamInfo.id')
                        .Panel.cycle-buttons
                            .form-control.tossup-label
                                | Tossup {{Scoresheet.game.currentCycle.number}}
                            button.Button.secondary.btn(
                                type='button'
                                ng-click='CycleCtrl.lastCycle()'
                                ng-disabled='!Scoresheet.game.onTossup || !Scoresheet.game.teams[0].teamInfo || !Scoresheet.game.teams[1].teamInfo || Scoresheet.game.currentCycle.number <= 1'
                            ) Back One Cycle
                            button.Button.secondary.btn(
                                type='button'
                                ng-click='CycleCtrl.nextCycle()'
                                ng-disabled='!Scoresheet.game.onTossup || !Scoresheet.game.teams[0].teamInfo || !Scoresheet.game.teams[1].teamInfo'
                            ) Dead Tossup / Next Tossup
                    .col-lg-6.col-md-6.col-sm-6.col-xs-6
                        select.form-control.nf-input.scoresheet-team(required ng-options='team as team.name group by CycleCtrl.scoresheetSelectGroup(team) for team in CycleCtrl.teams | preventSameMatchTeams:Scoresheet.game.teams[1].teamInfo.id | orderBy:"name"', 
                            ng-model='Scoresheet.game.teams[0].teamInfo' ng-change='CycleCtrl.loadTeamPlayers(Scoresheet.game.teams[0])',
                            ng-disabled='Scoresheet.game.currentCycle.number > 1'
                            ng-if='!Scoresheet.game.teams[0].teamInfo.id || !Scoresheet.game.teams[1].teamInfo.id'   
                        )
                            option(disabled value='') Choose a Team
                        .Panel.team-panel
                            .nf-panel-heading.center  
                                | {{Scoresheet.game.teams[0].teamInfo.name || 'Choose a Team'}} ({{CycleCtrl.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[0].teamInfo.id, Scoresheet.game.currentCycle.number - 1)}})
                                .Notice.warning.player-tooltip(ng-show='CycleCtrl.getNumberOfActivePlayers(Scoresheet.game.teams[0].players) > CycleCtrl.rules.maxActive')
                                    .icon
                                        .fa.fa-exclamation-circle
                                    .notice-label
                                        p Number of active players more than max allowed active players.
                                .Notice.warning.player-tooltip(ng-show='Scoresheet.game.teams[0].teamInfo.id && CycleCtrl.getNumberOfActivePlayers(Scoresheet.game.teams[0].players) === 0')
                                    .icon
                                        .fa.fa-exclamation-circle
                                    .notice-label
                                        p No active players.
                            .panel-body.nf-panel-body.nf-white.relative(style='position:relative')
                                .input-group.answer-buttons.nf-margin.responsive(ng-repeat='player in Scoresheet.game.teams[0].players' ng-class="{'not-visible' : !player.active}")
                                    div.player-name
                                        div.player-arrows(style='position:absolute;z-index:10' ng-if='Scoresheet.game.teams[0].players.length > 1')
                                            span.input-group-addon.btn.Button.primary.no-border(style='position:absolute;margin:0', 
                                                ng-click='CycleCtrl.swapPlayers(Scoresheet.game.teams[0].players, $index, $index - 1)',
                                                title='Switch {{player.name}} and {{$first ? Scoresheet.game.teams[0].players[Scoresheet.game.teams[0].players.length - 1].name : Scoresheet.game.teams[0].players[$index - 1].name}}'
                                            ) 
                                                i.fa.fa-arrow-up(style='position:absolute;top:20%;font-size:0.8em;right:25%')
                                            span.input-group-addon.btn.Button.secondary.no-border(style='position:absolute;margin:0;top:22px', 
                                                ng-click='CycleCtrl.swapPlayers(Scoresheet.game.teams[0].players, $index, $index + 1)',
                                                title='Switch {{player.name}} and {{$last ? Scoresheet.game.teams[0].players[0].name : Scoresheet.game.teams[0].players[$index + 1].name}}'
                                            ) 
                                                i.fa.fa-arrow-down(style='position:absolute;top:20%;font-size:0.8em;right:25%')
                                        div.form-control.nf-input.nf-white.name(ng-bind='player.name')
                                    span.input-group-addon.btn.Button(ng-repeat='tv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true', 
                                        ng-class="{'power-button': tv.type === 'Power', 'base-button': tv.type === 'Base', 'neg-button': tv.type === 'Neg'}",
                                        ng-click='CycleCtrl.addPlayerAnswerToCurrentCycle(player, Scoresheet.game.teams[0].teamInfo, tv); CycleCtrl.switchToBonusIfTossupGotten(tv, Scoresheet.game.teams[0].teamInfo.id)',
                                        ng-bind='tv.value')
                                
                                    br                               
                                    
                                    
                                div.neg-box(ng-show='!CycleCtrl.teamDidNotNegInCycle(Scoresheet.game.teams[0].teamInfo.id, Scoresheet.game.currentCycle)')
                                    button.Button.primary.btn.btn-block(type='button' ng-click='CycleCtrl.removeTeamNegsFromCycle(Scoresheet.game.teams[0].teamInfo.id, Scoresheet.game.currentCycle)') Undo Neg
                                    
                            .panel-footer.nf-panel-footer.nf-white
                                .input-group.nf-margin(ng-show='Scoresheet.game.teams[0].teamInfo')
                                    input.form-control.nf-input(ng-model='Scoresheet.game.teams[0].newPlayer' placeholder='New Player for {{Scoresheet.game.teams[0].teamInfo.name}}' type='text' autocomplete='off')
                                    span.input-group-addon.Button.primary.btn(ng-click='Scoresheet.addPlayer(Scoresheet.game.teams[0])')
                                        i.fa.fa-check
                                        
                    .col-lg-6.col-md-6.col-sm-6.col-xs-6
                        select.form-control.nf-input.scoresheet-team(required ng-options='team as team.name group by CycleCtrl.scoresheetSelectGroup(team) for team in CycleCtrl.teams | preventSameMatchTeams:Scoresheet.game.teams[0].teamInfo.id | orderBy:"name"', 
                            ng-model='Scoresheet.game.teams[1].teamInfo' ng-change='CycleCtrl.loadTeamPlayers(Scoresheet.game.teams[1])',
                            ng-disabled='Scoresheet.game.currentCycle.number > 1'
                            ng-if='!Scoresheet.game.teams[0].teamInfo.id || !Scoresheet.game.teams[1].teamInfo.id' 
                        )
                            option(disabled value='') Choose a Team
                        
                        .Panel
                            .nf-panel-heading.center 
                                | {{Scoresheet.game.teams[1].teamInfo.name || 'Choose a Team'}} ({{CycleCtrl.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[1].teamInfo.id, Scoresheet.game.currentCycle.number - 1)}})
                                .Notice.warning.player-tooltip(ng-show='CycleCtrl.getNumberOfActivePlayers(Scoresheet.game.teams[1].players) > CycleCtrl.rules.maxActive')
                                    .icon
                                        .fa.fa-exclamation-circle
                                    .notice-label
                                        p Number of active players more than max allowed active players.
                                .Notice.warning.player-tooltip(ng-show='Scoresheet.game.teams[1].teamInfo.id && CycleCtrl.getNumberOfActivePlayers(Scoresheet.game.teams[1].players) === 0')
                                    .icon
                                        .fa.fa-exclamation-circle
                                    .notice-label
                                        p No active players.
                            .panel-body.nf-panel-body.nf-white.relative
                                .input-group.nf-margin.responsive(ng-repeat='player in Scoresheet.game.teams[1].players' ng-class="{'not-visible' : !player.active}")
                                    div.player-name
                                        div.player-arrows(style='position:absolute;z-index:10' ng-if='Scoresheet.game.teams[1].players.length > 1')
                                            span.input-group-addon.btn.Button.primary.no-border(style='position:absolute;margin:0', 
                                                ng-click='CycleCtrl.swapPlayers(Scoresheet.game.teams[1].players, $index, $index - 1)',
                                                title='Switch {{player.name}} and {{$first ? Scoresheet.game.teams[1].players[Scoresheet.game.teams[1].players.length - 1].name : Scoresheet.game.teams[1].players[$index - 1].name}}'
                                            ) 
                                                i.fa.fa-arrow-up(style='position:absolute;top:20%;font-size:0.8em;right:25%')
                                            span.input-group-addon.btn.Button.secondary.no-border(style='position:absolute;margin:0;top:22px', 
                                                ng-click='CycleCtrl.swapPlayers(Scoresheet.game.teams[1].players, $index, $index + 1)', 
                                                title='Switch {{player.name}} and {{$last ? Scoresheet.game.teams[1].players[0].name : Scoresheet.game.teams[1].players[$index + 1].name}}'    
                                            ) 
                                                i.fa.fa-arrow-down(style='position:absolute;top:20%;font-size:0.8em;right:25%')
                                        div.form-control.nf-input.nf-white.name(ng-bind='player.name')
                                    span.input-group-addon.transition.btn(ng-repeat='tv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true', 
                                        ng-class="{'power-button': tv.type === 'Power', 'base-button': tv.type === 'Base', 'neg-button': tv.type === 'Neg'}",
                                        ng-click='CycleCtrl.addPlayerAnswerToCurrentCycle(player, Scoresheet.game.teams[1].teamInfo, tv); CycleCtrl.switchToBonusIfTossupGotten(tv, Scoresheet.game.teams[1].teamInfo.id)', 
                                        ng-bind='tv.value') 
                                    
                                    br
                                    
                                div.neg-box(ng-show='!CycleCtrl.teamDidNotNegInCycle(Scoresheet.game.teams[1].teamInfo.id, Scoresheet.game.currentCycle)')
                                    button.Button.primary.btn.btn-block(type='button' ng-click='CycleCtrl.removeTeamNegsFromCycle(Scoresheet.game.teams[1].teamInfo.id, Scoresheet.game.currentCycle)') Undo Neg
                
                            .panel-footer.nf-panel-footer.nf-white
                                .input-group.nf-margin(ng-show='Scoresheet.game.teams[1].teamInfo')
                                    input.form-control.nf-input(ng-model='Scoresheet.game.teams[1].newPlayer' placeholder='New Player for {{Scoresheet.game.teams[1].teamInfo.name}}' type='text' autocomplete='off')
                                    span.input-group-addon.Button.primary.btn(ng-click='Scoresheet.addPlayer(Scoresheet.game.teams[1])')
                                        i.fa.fa-check
                                        
                .row(ng-show='!Scoresheet.game.onTossup')
                    .col-lg-12.col-md-12.col-sm-12
                        .Panel
                            .nf-panel-heading.center 
                                | Bonus {{Scoresheet.game.currentCycle.number}} for {{Scoresheet.getTeam(Scoresheet.game.currentCycle.answers[Scoresheet.game.currentCycle.answers.length - 1].teamId).teamInfo.name }}
                            .panel-body.nf-panel-body.nf-white
                                div.table-responsive
                                    table.table.Table.table-condensed.current-bonus-table(ng-class='{"both-teams": Scoresheet.rules.bouncebacks}')
                                        thead
                                            th.table-head
                                            th.table-head(ng-if='Scoresheet.rules.bouncebacks || CycleCtrl.getTeamThatGotTossup(Scoresheet.game.currentCycle) === Scoresheet.game.teams[0].teamInfo.id')
                                                | {{ Scoresheet.game.teams[0].teamInfo.name }}
                                            th.table-head(ng-if='Scoresheet.rules.bouncebacks || CycleCtrl.getTeamThatGotTossup(Scoresheet.game.currentCycle) === Scoresheet.game.teams[1].teamInfo.id')
                                                | {{ Scoresheet.game.teams[1].teamInfo.name }}
                                        tbody
                                            tr(ng-repeat='part in Scoresheet.range(Scoresheet.pointScheme.partsPerBonus) track by $index')
                                                td Part {{ $index + 1 }}
                                                td(ng-show='Scoresheet.rules.bouncebacks || CycleCtrl.getTeamThatGotTossup(Scoresheet.game.currentCycle) === Scoresheet.game.teams[0].teamInfo.id')
                                                    span.input-group-addon.nf-button.transition.button-outline.bonus-part-toggle(ng-click='CycleCtrl.setTeamThatGotBonusPartCurrentCycle($index, Scoresheet.game.teams[0].teamInfo, Scoresheet.game.currentCycle.bonuses)', 
                                                        ng-class="{'selected' : Scoresheet.game.currentCycle.bonuses[$index] === Scoresheet.game.teams[0].teamInfo.id}")  
                                                        | + {{Scoresheet.pointScheme.bonusPointValue}}
                                                td(ng-show='Scoresheet.rules.bouncebacks || CycleCtrl.getTeamThatGotTossup(Scoresheet.game.currentCycle) === Scoresheet.game.teams[1].teamInfo.id')
                                                    span.input-group-addon.nf-button.transition.button-outline.bonus-part-toggle(ng-click='CycleCtrl.setTeamThatGotBonusPartCurrentCycle($index, Scoresheet.game.teams[1].teamInfo, Scoresheet.game.currentCycle.bonuses)', 
                                                        ng-class="{'selected' : Scoresheet.game.currentCycle.bonuses[$index] === Scoresheet.game.teams[1].teamInfo.id}")  
                                                        | + {{Scoresheet.pointScheme.bonusPointValue}}

                            .panel-footer.nf-panel-footer.nf-gray
                                .row
                                    .col-lg-6.col-md-6.col-sm-6.col-xs-6
                                        button.btn-sm.Button.secondary.btn.btn-block(type='button' ng-click='CycleCtrl.removeLastAnswerFromCycle(Scoresheet.game.currentCycle); CycleCtrl.switchCurrentCycleContext(false)') Back
                                    .col-lg-6.col-md-6.col-sm-6.col-xs-6
                                        button.btn-sm.Button.primary.btn.btn-block(type='button' ng-click='CycleCtrl.switchCurrentCycleContext(false); CycleCtrl.nextCycle()') Next
            br            

            .row(ng-controller='ScoresheetPointsTrackerCtrl as TrackerCtrl')
                .col-lg-6.col-md-12.col-sm-12
                    div.table-responsive.nf-table.Panel(ng-show="Scoresheet.game.teams[0].teamInfo")
                        table.Table.table.table-condensed.responsive-font.player-table
                            thead
                                th.table-head(ng-bind='Scoresheet.game.teams[0].teamInfo.name'
                                    colspan='{{3 + Scoresheet.game.teams[0].players.length}}')
                            thead
                                th.table-head In play?
                                th.table-head Player
                                th.table-head.center(ng-repeat='tv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true' ng-bind='tv.value')
                                th.table-head.center Pts
                                th.table-head.center TUH
                            tbody
                                tr.nf-white(ng-repeat='player in Scoresheet.game.teams[0].players')
                                    td.pad
                                        .Checkbox
                                            input(type='checkbox' ng-checked='player.active')
                                            span.checkmark(ng-click='player.active = !player.active')
                                    td.pad(ng-bind='player.name' ng-class="{'active-player': player.active}")
                                    td.pad.center(ng-repeat='tv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true' ng-bind='TrackerCtrl.getNumberOfTossupTypeForPlayer(Scoresheet.game, player, tv)')
                                    td.pad.center(ng-bind='TrackerCtrl.getPlayerTotalPoints(player)')
                                    td.pad.center
                                       input.center.input-sm.nf-input.form-control(type='number', 
                                            name='{{"player" + player.id + "_tuh"}}' min='{{TrackerCtrl.getNumberOfAnswersForPlayer(player)}}' max='{{Scoresheet.game.currentCycle.number - 1}}',
                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm['player' + player.id + '_tuh'].$invalid}", 
                                            ng-model='player.tuh' autocomplete='off', 
                                            title='{{ Scoresheet.scoresheetForm["player" + player.id + "_tuh"].$valid ? "" : ("This player must have at least " + TrackerCtrl.getNumberOfAnswersForPlayer(player) + " TUH and at most " + (Scoresheet.game.currentCycle.number - 1)) + " TUH" }}')

                .col-lg-6.col-md-12.col-sm-12
                    div.table-responsive.nf-table.Panel(ng-show="Scoresheet.game.teams[1].teamInfo")
                        table.table.table-condensed.responsive-font.player-table.Table
                            thead
                                th.table-head(ng-bind='Scoresheet.game.teams[1].teamInfo.name'
                                    colspan='{{3 + Scoresheet.game.teams[1].players.length}}')
                            thead
                                th.table-head In play?
                                th.table-head Player
                                th.table-head.center(ng-repeat='tv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true' ng-bind='tv.value')
                                th.table-head.center Pts
                                th.table-head.center TUH
                            tbody
                                tr.nf-white(ng-repeat='player in Scoresheet.game.teams[1].players')
                                    td.pad
                                        .Checkbox
                                            input(type='checkbox' ng-checked='player.active')
                                            span.checkmark(ng-click='player.active = !player.active')
                                    td.pad(ng-bind='player.name' ng-class="{'active-player': player.active}")
                                    td.pad.center(ng-repeat='tv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true' ng-bind='TrackerCtrl.getNumberOfTossupTypeForPlayer(Scoresheet.game, player, tv)')
                                    td.pad.center(ng-bind='TrackerCtrl.getPlayerTotalPoints(player)')
                                    td.pad.center
                                        input.center.input-sm.nf-input.form-control(type='number', 
                                            name='{{"player" + player.id + "_tuh"}}' min='{{TrackerCtrl.getNumberOfAnswersForPlayer(player)}}' max='{{Scoresheet.game.currentCycle.number - 1}}',
                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm['player' + player.id + '_tuh'].$invalid}",  
                                            ng-model='player.tuh' autocomplete='off')            

        div(ng-controller='ScoresheetTableController as ScoresheetTable')
            .col-lg-6.col-md-6.col-sm-12(ng-if='!Scoresheet.game.teams[0].teamInfo.id || !Scoresheet.game.teams[1].teamInfo.id')
                .Notice.info.scoresheet-tooltip
                    .icon
                        .fa.fa-info-circle
                    .notice-label
                        p
                            | Choose two teams to create a new scoresheet, or
                            a(href="#" ng-click='Scoresheet.loadLastSavedScoresheet()') load your last scoresheet.

            .col-lg-6.col-md-6.col-sm-12
                .Notice.warning(ng-if='Scoresheet.game.lastSavedAt && !Scoresheet.game.submitted')
                    .icon
                        .fa.fa-info-circle
                    .notice-label
                        p
                            | Remember to submit this match by clicking 'Complete Match' after the game is done.

                .Notice.success(ng-if='Scoresheet.game.submitted')
                    .icon
                        .fa.fa-check
                    .notice-label
                        p
                            | This scoresheet has been submitted.

            .col-lg-6.col-md-6.col-sm-12(ng-if='Scoresheet.game.teams[0].teamInfo.id && Scoresheet.game.teams[1].teamInfo.id' style='overflow:auto')
                    .Panel.table-responsive
                        table.Table.table.table-condensed.responsive-font.scoresheet(ng-controller='ScoresheetCycleController as CycleCtrl')
                            thead
                                th(colspan='{{Scoresheet.game.teams[0].players.length + Scoresheet.game.teams[1].players.length + 5}}')
                                    div.left
                                        button.Button.secondary.button.btn.btn-sm.new-scoresheet(type='button' ng-click='Scoresheet.resetScoresheet()'
                                            ng-if='Scoresheet.game.teams[0].teamInfo && Scoresheet.game.teams[1].teamInfo')
                                            | New Scoresheet
                                        button.btn.btn-sm.Button.primary.complete-match(type="button" data-toggle='modal' data-target='#myModal' ng-disabled='Scoresheet.game.currentCycle.number <= 1') {{ Scoresheet.game.submitted ? 'Undo Submission' : 'Complete Match' }}
                                    p.nf-label.right
                                        | Last Saved At: {{Scoresheet.game.lastSavedAt || 'Not Saved' | date:'short'}}
                            thead.table-header
                                th.center.nf-label.team-name(
                                    colspan='{{Scoresheet.game.teams[0].players.length}}'
                                ) {{ Scoresheet.game.teams[0].teamInfo.name + ' (' + CycleCtrl.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[0].teamInfo.id, Scoresheet.game.currentCycle.number - 1) + ')'}}
                                th
                                th
                                th
                                th
                                th
                                th.center.nf-label.team-name(
                                    colspan='{{Scoresheet.game.teams[1].players.length}}'
                                ) {{ Scoresheet.game.teams[1].teamInfo.name + ' (' + CycleCtrl.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[1].teamInfo.id, Scoresheet.game.currentCycle.number - 1) + ')'}}     
                            thead            
                                tr.header
                                    th.center.table-head(ng-repeat='player in Scoresheet.game.teams[0].players' title='{{player.name}}' ng-bind='player.name | limitTo:2')
                                    th.center.table-head.left-bonus Bonus
                                    th.center.table-head Total
                                    th.center.table-head TU # 
                                    th.center.table-head Total
                                    th.center.table-head.right-bonus Bonus
                                    th.center.table-head.nf-white(ng-repeat='player in Scoresheet.game.teams[1].players' title='{{player.name}}' ng-bind='player.name | limitTo:2')
                            tbody
                                tr.players-row(ng-repeat='cycle in Scoresheet.game.cycles track by $index', 
                                    ng-class="{'not-current-cycle': $index + 1 !== Scoresheet.game.currentCycle.number, 'current-cycle': $index + 1 === Scoresheet.game.currentCycle.number}",
                                    )
                                    td.center.player-cell.left-team(ng-repeat='player in Scoresheet.game.teams[0].players') 
                                        p(ng-show='!cycle.editing[player.id]' ng-click='ScoresheetTable.displayPlayerAnswerForCycle(player, $parent.$index)') 
                                            | {{ScoresheetTable.getPlayerAnswerForCycle(player, $parent.$index + 1 === Scoresheet.game.currentCycle.number ? Scoresheet.game.currentCycle : cycle).value || '&nbsp;'}}
                                        .input-group(ng-if='cycle.editing[player.id]')
                                            select.form-control.nf-input(style='font-size:.9em' ng-options='pv as pv.value for pv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true' ng-model='cycle.newAnswer[player.id]')
                                                option(value='') None
                                            span.input-group-addon.btn.Button.secondary.btn-sm(ng-click='cycle.editing[player.id] = false')
                                                i.fa.fa-times
                                            span.input-group-addon.Button.primary.btn.btn-sm(ng-click='ScoresheetTable.editPlayerAnswerForCycle(player.id, Scoresheet.game.teams[0].teamInfo.id, cycle.newAnswer[player.id], cycle)')
                                                i.fa.fa-check

                                    td.center.left-bonus 
                                        p(ng-show='!cycle.editingBonus' ng-click='ScoresheetTable.displayCycleBonuses(Scoresheet.game.teams[0].teamInfo.id, $index)') 
                                            | {{Scoresheet.game.currentCycle.number > $index ? ScoresheetTable.getTeamBonusPointsForCycle(Scoresheet.game.teams[0].teamInfo.id, $index) : '&nbsp;'}}
                                        div(ng-if='cycle.editingBonus && (Scoresheet.rules.bouncebacks || ScoresheetTable.getTeamThatGotTossup(cycle) === Scoresheet.game.teams[0].teamInfo.id)')
                                            .nf-margin(ng-repeat='part in Scoresheet.range(Scoresheet.pointScheme.partsPerBonus) track by $index')
                                                button.Button.btn.btn-sm.nf-gray.no-border(
                                                    type='button' 
                                                    ng-class="{'nf-green' : cycle.bonusesCopy[$index] === Scoresheet.game.teams[0].teamInfo.id}",
                                                    ng-click='ScoresheetTable.setTeamThatGotBonusPartCurrentCycle($index, Scoresheet.game.teams[0].teamInfo, cycle.bonusesCopy)')  
                                                    | + {{Scoresheet.pointScheme.bonusPointValue}}
                                            button.btn.btn-sm.Button.secondary.nf-margin(ng-click='cycle.editingBonus = false' type='button')
                                                i.fa.fa-times
                                            button.btn.btn-sm.Button.primary.nf-margin(ng-click='ScoresheetTable.editCycleBonuses(cycle)' type='button')
                                                i.fa.fa-check
                                    td.center 
                                        | {{Scoresheet.game.currentCycle.number > $index ? ScoresheetTable.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[0].teamInfo.id, $index) : '&nbsp;'}}
                                    td.center.tuh(ng-bind='$index + 1')
                                    td.center
                                        | {{Scoresheet.game.currentCycle.number > $index ? ScoresheetTable.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[1].teamInfo.id, $index) : '&nbsp;'}}
                                    td.center.player-cell.right-team.right-bonus
                                        p(ng-show='!cycle.editingBonus' ng-click='ScoresheetTable.displayCycleBonuses(Scoresheet.game.teams[1].teamInfo.id, $index)') 
                                            | {{Scoresheet.game.currentCycle.number > $index ? ScoresheetTable.getTeamBonusPointsForCycle(Scoresheet.game.teams[1].teamInfo.id, $index) : '&nbsp;'}}
                                        div(ng-if='cycle.editingBonus && (Scoresheet.rules.bouncebacks || ScoresheetTable.getTeamThatGotTossup(cycle) === Scoresheet.game.teams[1].teamInfo.id)')
                                            .nf-margin(ng-repeat='part in Scoresheet.range(Scoresheet.pointScheme.partsPerBonus) track by $index')
                                                button.btn.btn-sm.Button.nf-gray.no-border(
                                                    type='button' 
                                                    ng-class="{'nf-green' : cycle.bonusesCopy[$index] === Scoresheet.game.teams[1].teamInfo.id}",
                                                    ng-click='ScoresheetTable.setTeamThatGotBonusPartCurrentCycle($index, Scoresheet.game.teams[1].teamInfo, cycle.bonusesCopy)')  
                                                    | + {{Scoresheet.pointScheme.bonusPointValue}}
                                            button.btn.btn-sm.Button.secondary.nf-margin(ng-click='cycle.editingBonus = false' type='button')
                                                i.fa.fa-times
                                            button.btn.btn-sm.Button.primary.nf-margin(ng-click='ScoresheetTable.editCycleBonuses(cycle)' type='button')
                                                i.fa.fa-check

                                    td.center(ng-repeat='player in Scoresheet.game.teams[1].players') 
                                        p(ng-show='!cycle.editing[player.id]' ng-click='ScoresheetTable.displayPlayerAnswerForCycle(player, $parent.$index)') 
                                            | {{ScoresheetTable.getPlayerAnswerForCycle(player, $parent.$index + 1 === Scoresheet.game.currentCycle.number ? Scoresheet.game.currentCycle : cycle).value || '&nbsp;'}}
                                        .input-group(ng-if='cycle.editing[player.id]')
                                            select.form-control.nf-input(style='font-size:.9em' ng-options='pv as pv.value for pv in Scoresheet.pointScheme.tossupValues | orderBy:"value":true' ng-model='cycle.newAnswer[player.id]')
                                                option(value='') None
                                            span.input-group-addon.Button.secondary.btn.btn-sm(ng-click='cycle.editing[player.id] = false')
                                                i.fa.fa-times
                                            span.input-group-addon.Button.primary.btn.btn-sm(ng-click='ScoresheetTable.editPlayerAnswerForCycle(player.id, Scoresheet.game.teams[1].teamInfo.id, cycle.newAnswer[player.id], cycle)')
                                                i.fa.fa-check

                .modal.Dialog.match-dialog#myModal(role='dialog')
                    .modal-dialog.modal-lg
                        .modal-content.nf-modal-content
                            .modal-header.nf-gray(style='border-bottom:none')
                                button.btn.Button.secondary(data-dismiss='modal')
                                    .fa.fa-times
                                button.Button.primary.btn.right(type='submit' ng-disabled='Scoresheet.game.currentCycle.number === 1' ng-show='!Scoresheet.game.submitted')
                                    | Submit
                                button.Button.secondary.btn.right(type='button' ng-show='Scoresheet.game.submitted' ng-click='Scoresheet.revertScoresheetSubmission()')
                                    | Undo submission
                            .modal-body.nf-white
                                .panel(style='border:none')
                                    .nf-panel-heading
                                        .Notice.info.scoresheet-tooltip(ng-if="!Scoresheet.game.submitted")
                                            .icon
                                                .fa.fa-info-circle
                                            .notice-label
                                                p Verify that the below information is correct and fill in required fields before clicking "Submit"

                                        .Notice.success.scoresheet-tooltip(ng-if="Scoresheet.game.submitted")
                                            .icon
                                                .fa.fa-check
                                            .notice-label
                                                | Your match has been submitted! If you need to undo your submission, click "Undo Submission".
                                                | Otherwise, close this window and start a new scoresheet.
                                    .nf-panel-body.panel-body.nf-white
                                        .row
                                            table.Table.table.table-condensed.table-responsive.table-bordered.match-summary-table
                                                thead
                                                    tr.header
                                                        th.table-head
                                                        th.table-head(ng-bind='Scoresheet.game.teams[0].teamInfo.name')
                                                        th.table-head(ng-bind='Scoresheet.game.teams[1].teamInfo.name')
                                                tbody
                                                    tr
                                                        td.nf-label Score
                                                        td.nf-label {{ScoresheetTable.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[0].teamInfo.id, Scoresheet.game.currentCycle.number - 1)}}
                                                        td.nf-label {{ScoresheetTable.getTeamScoreUpToCycle(Scoresheet.game, Scoresheet.game.teams[1].teamInfo.id, Scoresheet.game.currentCycle.number - 1)}}
                                                    tr(ng-if='Scoresheet.rules.bouncebacks')
                                                        td.nf-label Bounceback Points
                                                        td.nf-label {{ScoresheetTable.getTeamBouncebacks(Scoresheet.game, Scoresheet.game.teams[0].teamInfo.id)}}
                                                        td.nf-label {{ScoresheetTable.getTeamBouncebacks(Scoresheet.game, Scoresheet.game.teams[1].teamInfo.id)}}
                                                    tr
                                                        td TUs with no bonuses
                                                        td
                                                            input.form-control.nf-input.center(type='number' min='0' max='{{Scoresheet.game.currentCycle.number - 1}}' placeholder='Tossups answered correctly that didn\'t lead to bonuses.', 
                                                                ng-model='Scoresheet.game.teams[0].overtime',
                                                                name='ot1',
                                                                title='Tossups answered correctly that didn\'t lead to bonuses.'
                                                                ng-class="{'nf-error' : Scoresheet.scoresheetForm.ot1.$invalid}", 
                                                            )
                                                        td
                                                            input.form-control.nf-input.center(type='number' min='0' max='{{Scoresheet.game.currentCycle.number - 1}}' placeholder='Tossups answered correctly that didn\'t lead to bonuses.', 
                                                                ng-model='Scoresheet.game.teams[1].overtime',
                                                                name='ot2',
                                                                title='Tossups answered correctly that didn\'t lead to bonuses.'
                                                                ng-class="{'nf-error' : Scoresheet.scoresheetForm.ot2.$invalid}", 
                                                            )

                                        .row
                                            .col-lg-12.col-md-12.col-sm-12
                                                .row
                                                    .col-md-6.col-sm-6.center.tossups-heard-label
                                                        label.label.nf-label.btn-block Tossups Heard
                                                    .col-md-6.col-sm-6
                                                        .form-control.nf-input.readonly
                                                            p
                                                                | {{Scoresheet.game.currentCycle.number - 1}} 
                                        br

                                        div(class="row")
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-6 col-sm-6")
                                                        label(class="label nf-label btn-block" style='float:right') Round
                                                    div(class="col-md-6 col-sm-6")
                                                        input(type="number" min='0' class="form-control nf-input " name="round" 
                                                            ng-model='Scoresheet.game.round',
                                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm.round.$invalid}"
                                                        )
                                        br                        

                                        div(class="row")
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-6 col-sm-6")
                                                        label(class="label nf-label btn-block" style='float:right') Room
                                                    div(class="col-md-6 col-sm-6")
                                                        input(type="text" class="form-control nf-input " name="room"
                                                            ng-model='Scoresheet.game.room',
                                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm.room.$invalid}"
                                                        )
                                        br
                                        
                                        div(class="row")
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-6 col-sm-6")
                                                        label(class="label nf-label btn-block" style='float:right') Moderator
                                                    div(class="col-md-6 col-sm-6")
                                                        input(type="text" class="form-control nf-input " name="moderator" 
                                                            ng-model='Scoresheet.game.moderator', 
                                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm.moderator.$invalid}"
                                                        )
                                        br
                                        div(class="row")
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-6 col-sm-6")
                                                        label(class="label nf-label btn-block" style='float:right') Packet
                                                    div(class="col-md-6 col-sm-6")
                                                        input(type="text" class="form-control nf-input " name="packet"
                                                            ng-model='Scoresheet.game.packet',
                                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm.packet.$invalid}"
                                                        )
                                        br
                                        div(class="row")
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-6 col-sm-6")
                                                        label(class="label nf-label btn-block" style='float:right') Serial ID
                                                    div(class="col-md-6 col-sm-6")
                                                        input(type="text" class="form-control nf-input " name="serialId"
                                                            ng-model='Scoresheet.game.serialId',
                                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm.serialId.$invalid}"
                                                        )
                                        br
                                        div(class="row")
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-6 col-sm-6")
                                                        label(class="label nf-label btn-block" style='float:right' title='Select all phases that you want this game to count for.') Phases
                                                    div(class="col-md-6 col-sm-6")
                                                        select(multiple required class="form-control nf-input no-overflow" name='phases' ng-attr-size='{{Scoresheet.phases.length}}', 
                                                            ng-options='phase.name for phase in Scoresheet.phases | orderBy:"name" track by phase.id' ng-model='Scoresheet.game.phases',
                                                            ng-class="{'nf-error' : Scoresheet.scoresheetForm.phases.$invalid}"
                                                        )
                                                            
                                        br
                                        
                                        div(class='row')
                                            div(class="col-lg-12 col-md-12 col-sm-12")
                                                div(class="row")
                                                    div(class="col-md-4 col-sm-4")
                                                        label(class="label nf-label btn-block" style='float:right;') Notes
                                                    div(class="col-md-8 col-sm-8")
                                                        textarea(class="form-control nf-input " name="notes" style='min-height:200px' ng-model='Scoresheet.game.notes')
                        